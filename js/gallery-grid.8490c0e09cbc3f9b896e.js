"use strict";(globalThis.webpackChunknew_bedford_framework=globalThis.webpackChunknew_bedford_framework||[]).push([[8432],{68610:(t,e,i)=>{i.r(e),i.d(e,{GalleryGrid:()=>w,default:()=>v});var r,s,o,n,a=i(59440),l=i(17228),h=i(82e3),u=i(22902),d=i(52008),c=i(67373);class g extends c.A{constructor(t){super(t);const{gutter:e,columns:i,width:r}=this.props;this.state={gutter:e,columns:i,width:r},this.layout()}setStyles(){const{container:t}=this.props,{columns:e,gutter:i,width:r}=this.state,s=i/20;"full"!==r&&"inset"!==r?t.setAttribute("style",`grid-template-columns: repeat(${e}, 1fr); grid-column-gap: ${s}vw; \n      grid-row-gap: ${s}vw; padding: 0vw ${s}vw; width: auto`):t.setAttribute("style",`grid-template-columns: repeat(${e}, 1fr); grid-column-gap: \n        ${s}vw; grid-row-gap: ${s}vw;\n        width: auto`)}layout(t){t&&this.setState({...t}),this.setStyles()}destroy(){}}r=g,s="defaultProps",o={container:document.createElement("div"),gutter:0,columns:2,width:"full-bleed"},(s="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(s,"string"))?n:n+"")in r?Object.defineProperty(r,s,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[s]=o;var m=i(75396),p=i(68651),f=i(63285),b=i(10811);function y(t,e,i){return e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e),e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class w extends c.A{constructor(t){super(),y(this,"loadImage",t=>{const{imageSelector:e}=this.props,i=t.querySelector(e);i.onload=()=>{t.dataset.loaded=!0},(0,b.h)(i)?i.onload():l.A.loadLazy(i,{load:!0,mode:"cover",useAdvancedPositioning:!0})}),y(this,"onLightboxOpen",t=>{const{isHistoryEnabled:e}=this.state;e&&(t.preventDefault(),history.pushState({},"",t.currentTarget.href))}),y(this,"onResize",()=>{const t=this.getColumnData(this.state.numColumns,this.state.gutter);this.packer.layout({...t,width:this.node.dataset.width}),this.loadImages(this.ref.items)}),y(this,"onItemShow",t=>{let{node:e}=t;e.dataset.show||(e.dataset.show=!0)}),y(this,"removeLightboxElementFromDOM",()=>{if(this.state.lightboxEnabled){const t=document.querySelector(`[data-lightbox-section-id="${this.sectionId}"]`);t&&t.remove()}}),y(this,"destroy",()=>{this.unbindListeners(),this.removeLightboxElementFromDOM(),this.stagger.destroy(),this.packer.destroy()}),this.betaFeatureFlags=(0,a.T)(window,"Static.SQUARESPACE_CONTEXT.betaFeatureFlags",[]);const{listSelector:e,itemSelector:i,imageSelector:r,lightboxLinkSelector:s}=this.props,o=(0,a.T)(window,"Static.SQUARESPACE_CONTEXT.collection.fullUrl",null);let n={};t.dataset.props&&(n=JSON.parse(t.dataset.props)),this.history=(0,h.J)(),this.node=t,this.sectionId=this.node.dataset.sectionId,this.state={design:"grid",collectionFullUrl:o,isHistoryEnabled:o&&this.history,numColumns:3,gutter:20,width:"full",lightboxEnabled:!1,...n},this.ref={list:this.node.querySelector(e),items:Array.from(this.node.querySelectorAll(i)),lightboxLinks:Array.from(this.node.querySelectorAll(s)),images:Array.from(this.node.querySelectorAll(`${i} ${r}`))},this.onResize=(0,m.A)(this.onResize,f.X0),this.stagger=new d.A({nodes:this.ref.items,onEnter:this.onItemShow}),this.packer=new g({container:this.ref.list,...this.getColumnData(this.state.numColumns,this.state.gutter),width:this.node.dataset.width}),this.node.dataset.lightbox=this.state.lightboxEnabled,this.bindListeners()}getColumnData(t,e){return{columns:(0,u._v)(t),gutter:e}}loadImages(t){t.forEach(this.loadImage)}bindListeners(){this.ref.lightboxLinks.forEach(t=>{t.addEventListener("click",this.onLightboxOpen)}),p.A.on(this.onResize),this.stagger.start(),this.onResize()}unbindListeners(){this.ref.lightboxLinks.forEach(t=>{t.removeEventListener("click",this.onLightboxOpen)}),p.A.off(this.onResize)}}y(w,"defaultProps",{listSelector:".gallery-grid-wrapper",itemSelector:".gallery-grid-item",lightboxLinkSelector:".gallery-grid-lightbox-link",imageSelector:"img",loadedItemClass:""});const v=t=>new w(t)},52008:(t,e,i)=>{i.d(e,{A:()=>l});var r=i(67279),s=i.n(r),o=i(67373),n=i(49099);function a(t,e,i){var r;return(e="symbol"==typeof(r=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?r:r+"")in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class l extends o.A{constructor(t){super(t),a(this,"onNodeEnter",t=>{const{node:e}=t,{delay:i,stagger:r}=this.props;e.__staggerEntered||(e.__staggerEntered=!0,e.__staggerTimeout=setTimeout(()=>{this.props.onEnter(t)},i+this.count*r),this.instant||(this.count+=1,this.count=Math.min(this.props.maxCount,this.count),this.countTimeout()))}),this.state={isActive:!1},this.count=0,this.baseTimeout=null,this.instant=!1,this.viewportWatcher=new(s())}start(){this.state.isActive||(this.setState({isActive:!0}),this.viewportWatcher.addNodes({nodes:this.props.nodes,range:[100,0],callbacks:{onEnter:this.onNodeEnter}}))}countTimeout(){clearTimeout(this.baseTimeout),this.baseTimeout=setTimeout(()=>{this.count=0},10)}destroy(){this.viewportWatcher.destroy(),clearTimeout(this.baseTimeout),this.props.nodes.forEach(t=>{clearTimeout(t.__staggerTimeout)})}}a(l,"defaultProps",{delay:50,stagger:50,maxCount:20,nodes:[],onEnter:n.l})},82e3:(t,e,i)=>{i.d(e,{J:()=>a});const r=Array.prototype.slice,s=function(){const t=r.call(arguments);return function(){let e=r.call(arguments);for(let i=t.length-1;i>=0;i--)e=[t[i].apply(this,e)];return e[0]}},o=[],n={executeCallbacks(){o.forEach(t=>t())},trigger(){this.executeCallbacks()},registerCallback(t){t&&o.push(t)},removeCallback(t){if(t){const e=o.indexOf(t);e>-1&&o.splice(e,1)}},on(t){this.registerCallback(t)},off(t){this.removeCallback(t)}};window.history&&window.history.pushState&&(history.change=n,history.pushState=s(()=>history.change.trigger(),history.pushState),history.replaceState=s(()=>history.change.trigger(),history.replaceState),window.addEventListener("popstate",()=>{history.change.trigger()}));const a=()=>window.history&&window.history.pushState?history:null},10811:(t,e,i)=>{i.d(e,{h:()=>r});const r=t=>!!t.dataset.loader},22902:(t,e,i)=>{i.d(e,{P6:()=>s,TT:()=>l,_v:()=>n,kr:()=>o,pG:()=>a});i(68444);var r=i(63285);const s=t=>{if(!t)return 1;if(!t.dataset.imageDimensions){const e=t.getAttribute("width"),i=t.getAttribute("height");return e&&i?+e/+i:1}const e=t.dataset.imageDimensions.split("x");return e[0]&&e[1]?+e[0]/+e[1]:void 0},o=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;if(t<=e)return t;const i=window.innerWidth;return i<=r.fi.sm?Math.max(e,Math.round(.25*t)):i<=r.fi.md?Math.max(e,Math.round(.5*t)):i<=r.fi.lg?Math.max(e,Math.round(.75*t)):t},n=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const e=window.innerWidth;let i=Math.max(1,t);return 1===i?i:e<=r.fi.sm?2:e<=r.fi.md?Math.max(Math.ceil(.5*i),2):e<=r.fi.lg?Math.ceil(.75*i):i},a=t=>{let e=0,i=0;const r={width:e,height:i};return t?(t.dataset.imageDimensions?[e,i]=t.dataset.imageDimensions.split("x"):(e=t.getAttribute("width"),i=t.getAttribute("height")),e&&i?{width:+e,height:+i}:r):r},l=t=>{const e={x:.5,y:.5};if(!t)return e;if(!t.dataset.imageFocalPoint)return e;const[i,r]=t.dataset.imageFocalPoint.split(",");return i&&r?{x:+i,y:+r}:e}}}]);